{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport { Map, GoogleApiWrapper, Marker } from 'google-maps-react';\nimport { connect } from 'react-redux';\nimport { saveMapCoords } from '../redux/actions/index';\nimport { Redirect } from 'react-router-dom';\nimport { Button } from 'semantic-ui-react';\nimport InfoWindowEx from './infoWindowEx';\nimport '../styles/navbar.scss';\n\nvar uuidv1 = require('uuid/v1');\n\nexport var Maps =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Maps, _Component);\n\n  function Maps() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Maps);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Maps)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      data: [],\n      loc_x: 0,\n      loc_y: 0,\n      locRendered: false,\n      showingInfoWindow: false,\n      activeMarker: {},\n      selectedPlace: {},\n      redirect: false,\n      redirectId: 0\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getUserLocation\", function () {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(_this.showPosition);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showPosition\", function (position) {\n      _this.setState({\n        loc_x: position.coords.latitude,\n        loc_y: position.coords.longitude,\n        locRendered: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchRequestLocations\", function () {\n      fetch(\"https://neighborapp-backend.herokuapp.com/requests/\", {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-User-Email': localStorage.getItem('email'),\n          'X-User-Token': localStorage.getItem('token')\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        _this.setState({\n          data: data.data\n        });\n\n        setTimeout(function () {\n          _this.fetchRequestLocations();\n        }, 20000);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"saveCoords\", function (mapProps, map, clickEven) {\n      if (window.location.pathname === '/c/request') {\n        _this.props.saveMapCoords(clickEven.latLng.lat(), clickEven.latLng.lng());\n\n        document.querySelector('.custom-modal').style.visibility = 'visible';\n        document.querySelector('.fader').style.visibility = 'visible';\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"openContribution\", function (id) {\n      document.querySelector('.fader').style.visibility = 'visible';\n\n      _this.setState({\n        redirect: true,\n        redirectId: id,\n        showingInfoWindow: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderRedirect\", function () {\n      if (_this.state.redirect) {\n        return React.createElement(Redirect, {\n          to: \"/c/contribution/\".concat(_this.state.redirectId)\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"centerMoved\", function (mapProps, map) {\n      _this.setState({\n        loc_x: map.center.lat(),\n        loc_y: map.center.lng()\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMarkerClick\", function (props, marker) {\n      _this.setState({\n        selectedPlace: props.data,\n        activeMarker: marker,\n        showingInfoWindow: true,\n        redirect: false\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Maps, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.getUserLocation();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchRequestLocations();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", null, this.renderRedirect(), this.state.locRendered ? React.createElement(Map, {\n        google: this.props.google,\n        zoom: 14,\n        styles: this.props.mapStyles,\n        disableDefaultUI: true,\n        onClick: this.saveCoords,\n        onDragend: this.centerMoved,\n        initialCenter: {\n          lat: this.state.loc_x,\n          lng: this.state.loc_y\n        }\n      }, this.state.data.map(function (m) {\n        if (m.status === 'open') {\n          if (m.request_type === 'normal') {\n            return React.createElement(Marker, {\n              key: uuidv1(),\n              position: {\n                lat: m.x,\n                lng: m.y\n              },\n              title: m.title,\n              data: m,\n              onClick: _this2.onMarkerClick,\n              icon: {\n                url: '../../data/welfareroom.png',\n                anchor: new _this2.props.google.maps.Point(48, 48),\n                scaledSize: new _this2.props.google.maps.Size(48, 48)\n              }\n            });\n          } else {\n            return React.createElement(Marker, {\n              key: uuidv1(),\n              position: {\n                lat: m.x,\n                lng: m.y\n              },\n              title: m.title,\n              data: m,\n              onClick: _this2.onMarkerClick,\n              icon: {\n                url: '../../data/tortillas1.png',\n                anchor: new _this2.props.google.maps.Point(48, 48),\n                scaledSize: new _this2.props.google.maps.Size(48, 48)\n              }\n            });\n          }\n        }\n      }), React.createElement(InfoWindowEx, {\n        marker: this.state.activeMarker,\n        visible: this.state.showingInfoWindow\n      }, React.createElement(\"div\", null, React.createElement(\"h1\", null, this.state.selectedPlace.title), React.createElement(\"div\", null, this.state.selectedPlace.description), React.createElement(\"br\", null), React.createElement(Button, {\n        onClick: function onClick() {\n          return _this2.openContribution(_this2.state.selectedPlace.id);\n        }\n      }, \"Read more\")))) : null);\n    }\n  }]);\n\n  return Maps;\n}(Component);\nMaps.defaultProps = {\n  mapStyles: [{\n    elementType: 'geometry',\n    stylers: [{\n      color: '#242f3e'\n    }]\n  }, {\n    elementType: 'labels.text.fill',\n    stylers: [{\n      color: '#746855'\n    }]\n  }, {\n    elementType: 'labels.text.stroke',\n    stylers: [{\n      color: '#242f3e'\n    }]\n  }, {\n    featureType: 'administrative.land_parcel',\n    elementType: 'labels',\n    stylers: [{\n      visibility: 'off'\n    }]\n  }, {\n    featureType: 'administrative.locality',\n    elementType: 'labels.text.fill',\n    stylers: [{\n      color: '#d59563'\n    }]\n  }, {\n    featureType: 'poi',\n    elementType: 'labels.text',\n    stylers: [{\n      visibility: 'off'\n    }]\n  }, {\n    featureType: 'poi',\n    elementType: 'labels.text.fill',\n    stylers: [{\n      color: '#d59563'\n    }]\n  }, {\n    featureType: 'poi.business',\n    stylers: [{\n      visibility: 'off'\n    }]\n  }, {\n    featureType: 'poi.park',\n    elementType: 'geometry',\n    stylers: [{\n      color: '#263c3f'\n    }]\n  }, {\n    featureType: 'poi.park',\n    elementType: 'labels.text',\n    stylers: [{\n      visibility: 'off'\n    }]\n  }, {\n    featureType: 'poi.park',\n    elementType: 'labels.text.fill',\n    stylers: [{\n      color: '#6b9a76'\n    }]\n  }, {\n    featureType: 'road',\n    elementType: 'geometry',\n    stylers: [{\n      color: '#38414e'\n    }]\n  }, {\n    featureType: 'road',\n    elementType: 'geometry.stroke',\n    stylers: [{\n      color: '#212a37'\n    }]\n  }, {\n    featureType: 'road',\n    elementType: 'labels.text.fill',\n    stylers: [{\n      color: '#9ca5b3'\n    }]\n  }, {\n    featureType: 'road.highway',\n    elementType: 'geometry',\n    stylers: [{\n      color: '#746855'\n    }]\n  }, {\n    featureType: 'road.highway',\n    elementType: 'geometry.stroke',\n    stylers: [{\n      color: '#1f2835'\n    }]\n  }, {\n    featureType: 'road.highway',\n    elementType: 'labels.text.fill',\n    stylers: [{\n      color: '#f3d19c'\n    }]\n  }, {\n    featureType: 'road.local',\n    elementType: 'labels',\n    stylers: [{\n      visibility: 'off'\n    }]\n  }, {\n    featureType: 'transit',\n    elementType: 'geometry',\n    stylers: [{\n      color: '#2f3948'\n    }]\n  }, {\n    featureType: 'transit.station',\n    elementType: 'labels.text.fill',\n    stylers: [{\n      color: '#d59563'\n    }]\n  }, {\n    featureType: 'water',\n    elementType: 'geometry',\n    stylers: [{\n      color: '#17263c'\n    }]\n  }, {\n    featureType: 'water',\n    elementType: 'labels.text.fill',\n    stylers: [{\n      color: '#515c6d'\n    }]\n  }, {\n    featureType: 'water',\n    elementType: 'labels.text.stroke',\n    stylers: [{\n      color: '#17263c'\n    }]\n  }]\n};\n\nfunction mapStateToProps(state) {\n  return {\n    x: state.x,\n    y: state.y\n  };\n}\n\nexport default connect(mapStateToProps, {\n  saveMapCoords: saveMapCoords\n})(GoogleApiWrapper({\n  apiKey: 'AIzaSyCw1Cu5QmZqsFLWq-D7m12E3Qqjjj13xWY'\n})(Maps));\n/*\r\nimport { Map, GoogleApiWrapper } from 'google-maps-react';\r\n\r\nimport '../styles/mapQuery.scss'\r\n\r\nconst mapStyles = {\r\n\t\t  width: '100%',\r\n\t\t  height: '100%',\r\n};\r\nexport default function MapQuery() {\r\n\treturn (\r\n\t        <Map\r\n\t          google={this.props.google}\r\n\t          zoom={8}\r\n\t          style={mapStyles}\r\n\t          initialCenter={{ lat: 47.444, lng: -122.176}}\r\n\t        />\r\n\t);\r\n}\r\n\r\nexport default GoogleApiWrapper({\r\n\t  apiKey: 'AIzaSyCSu4_BXLGx-_RprlX5-ewaMdI5gAGi8Mk'\r\n})(MapContainer);*/","map":{"version":3,"sources":["C:\\Users\\majed\\eclipse-workspace\\HopSpot\\testingRESTfulAPI\\components\\mapQuery.js"],"names":["React","Component","Map","GoogleApiWrapper","Marker","connect","saveMapCoords","Redirect","Button","InfoWindowEx","uuidv1","require","Maps","data","loc_x","loc_y","locRendered","showingInfoWindow","activeMarker","selectedPlace","redirect","redirectId","navigator","geolocation","getCurrentPosition","showPosition","position","setState","coords","latitude","longitude","fetch","method","headers","localStorage","getItem","then","res","json","setTimeout","fetchRequestLocations","mapProps","map","clickEven","window","location","pathname","props","latLng","lat","lng","document","querySelector","style","visibility","id","state","center","marker","getUserLocation","renderRedirect","google","mapStyles","saveCoords","centerMoved","m","status","request_type","x","y","title","onMarkerClick","url","anchor","maps","Point","scaledSize","Size","description","openContribution","defaultProps","elementType","stylers","color","featureType","mapStateToProps","apiKey"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Map, GoogleApiWrapper, Marker } from 'google-maps-react'\r\nimport { connect } from 'react-redux'\r\nimport { saveMapCoords } from '../redux/actions/index'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { Button } from 'semantic-ui-react'\r\nimport InfoWindowEx from './infoWindowEx'\r\n\r\nimport '../styles/navbar.scss'\r\n\r\nconst uuidv1 = require('uuid/v1')\r\n\r\nexport class Maps extends Component {\r\n    state = {\r\n        data: [],\r\n        loc_x: 0,\r\n        loc_y: 0,\r\n        locRendered: false,\r\n        showingInfoWindow: false,\r\n        activeMarker: {},\r\n        selectedPlace: {},\r\n        redirect: false,\r\n        redirectId: 0\r\n    }\r\n\r\n    getUserLocation = () => {\r\n        if (navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition(this.showPosition)\r\n        }\r\n    }\r\n\r\n    showPosition = position => {\r\n        this.setState({\r\n            loc_x: position.coords.latitude,\r\n            loc_y: position.coords.longitude,\r\n            locRendered: true\r\n        })\r\n    }\r\n\r\n    fetchRequestLocations = () => {\r\n        fetch(`https://neighborapp-backend.herokuapp.com/requests/`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'X-User-Email': localStorage.getItem('email'),\r\n                'X-User-Token': localStorage.getItem('token')\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                this.setState({ data: data.data })\r\n                setTimeout(() => {\r\n                    this.fetchRequestLocations()\r\n                }, 20000)\r\n            })\r\n    }\r\n\r\n    saveCoords = (mapProps, map, clickEven) => {\r\n        if (window.location.pathname === '/c/request') {\r\n            this.props.saveMapCoords(clickEven.latLng.lat(), clickEven.latLng.lng())\r\n            document.querySelector('.custom-modal').style.visibility = 'visible'\r\n            document.querySelector('.fader').style.visibility = 'visible'\r\n        }\r\n    }\r\n\r\n    openContribution = id => {\r\n        document.querySelector('.fader').style.visibility = 'visible'\r\n        this.setState({\r\n            redirect: true,\r\n            redirectId: id,\r\n            showingInfoWindow: false\r\n        })\r\n    }\r\n\r\n    renderRedirect = () => {\r\n        if (this.state.redirect) {\r\n            return <Redirect to={`/c/contribution/${this.state.redirectId}`} />\r\n        }\r\n    }\r\n\r\n    centerMoved = (mapProps, map) => {\r\n        this.setState({\r\n            loc_x: map.center.lat(),\r\n            loc_y: map.center.lng()\r\n        })\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.getUserLocation()\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchRequestLocations()\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.renderRedirect()}\r\n                {this.state.locRendered ? (\r\n                    <Map\r\n                        google={this.props.google}\r\n                        zoom={14}\r\n                        styles={this.props.mapStyles}\r\n                        disableDefaultUI={true}\r\n                        onClick={this.saveCoords}\r\n                        onDragend={this.centerMoved}\r\n                        initialCenter={{\r\n                            lat: this.state.loc_x,\r\n                            lng: this.state.loc_y\r\n                        }}\r\n                    >\r\n                        {this.state.data.map(m => {\r\n                            if (m.status === 'open') {\r\n                                if (m.request_type === 'normal') {\r\n                                    return (\r\n                                        <Marker\r\n                                            key={uuidv1()}\r\n                                            position={{ lat: m.x, lng: m.y }}\r\n                                            title={m.title}\r\n                                            data={m}\r\n                                            onClick={this.onMarkerClick}\r\n                                            icon={{\r\n                                                url: '../../data/welfareroom.png',\r\n                                                anchor: new this.props.google.maps.Point(48, 48),\r\n                                                scaledSize: new this.props.google.maps.Size(48, 48)\r\n                                            }}\r\n                                        />\r\n                                    )\r\n                                } else {\r\n                                    return (\r\n                                        <Marker\r\n                                            key={uuidv1()}\r\n                                            position={{ lat: m.x, lng: m.y }}\r\n                                            title={m.title}\r\n                                            data={m}\r\n                                            onClick={this.onMarkerClick}\r\n                                            icon={{\r\n                                                url: '../../data/tortillas1.png',\r\n                                                anchor: new this.props.google.maps.Point(48, 48),\r\n                                                scaledSize: new this.props.google.maps.Size(48, 48)\r\n                                            }}\r\n                                        />\r\n                                    )\r\n                                }\r\n                            }\r\n                        })}\r\n                        <InfoWindowEx marker={this.state.activeMarker} visible={this.state.showingInfoWindow}>\r\n                            <div>\r\n                                <h1>{this.state.selectedPlace.title}</h1>\r\n                                <div>{this.state.selectedPlace.description}</div>\r\n                                <br />\r\n                                <Button onClick={() => this.openContribution(this.state.selectedPlace.id)}>\r\n                                    Read more\r\n                                </Button>\r\n                            </div>\r\n                        </InfoWindowEx>\r\n                    </Map>\r\n                ) : null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    onMarkerClick = (props, marker) => {\r\n        this.setState({\r\n            selectedPlace: props.data,\r\n            activeMarker: marker,\r\n            showingInfoWindow: true,\r\n            redirect: false\r\n        })\r\n    }\r\n}\r\n\r\nMaps.defaultProps = {\r\n    mapStyles: [\r\n        {\r\n            elementType: 'geometry',\r\n            stylers: [\r\n                {\r\n                    color: '#242f3e'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            elementType: 'labels.text.fill',\r\n            stylers: [\r\n                {\r\n                    color: '#746855'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            elementType: 'labels.text.stroke',\r\n            stylers: [\r\n                {\r\n                    color: '#242f3e'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'administrative.land_parcel',\r\n            elementType: 'labels',\r\n            stylers: [\r\n                {\r\n                    visibility: 'off'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'administrative.locality',\r\n            elementType: 'labels.text.fill',\r\n            stylers: [\r\n                {\r\n                    color: '#d59563'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'poi',\r\n            elementType: 'labels.text',\r\n            stylers: [\r\n                {\r\n                    visibility: 'off'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'poi',\r\n            elementType: 'labels.text.fill',\r\n            stylers: [\r\n                {\r\n                    color: '#d59563'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'poi.business',\r\n            stylers: [\r\n                {\r\n                    visibility: 'off'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'poi.park',\r\n            elementType: 'geometry',\r\n            stylers: [\r\n                {\r\n                    color: '#263c3f'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'poi.park',\r\n            elementType: 'labels.text',\r\n            stylers: [\r\n                {\r\n                    visibility: 'off'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'poi.park',\r\n            elementType: 'labels.text.fill',\r\n            stylers: [\r\n                {\r\n                    color: '#6b9a76'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'road',\r\n            elementType: 'geometry',\r\n            stylers: [\r\n                {\r\n                    color: '#38414e'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'road',\r\n            elementType: 'geometry.stroke',\r\n            stylers: [\r\n                {\r\n                    color: '#212a37'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'road',\r\n            elementType: 'labels.text.fill',\r\n            stylers: [\r\n                {\r\n                    color: '#9ca5b3'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'road.highway',\r\n            elementType: 'geometry',\r\n            stylers: [\r\n                {\r\n                    color: '#746855'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'road.highway',\r\n            elementType: 'geometry.stroke',\r\n            stylers: [\r\n                {\r\n                    color: '#1f2835'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'road.highway',\r\n            elementType: 'labels.text.fill',\r\n            stylers: [\r\n                {\r\n                    color: '#f3d19c'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'road.local',\r\n            elementType: 'labels',\r\n            stylers: [\r\n                {\r\n                    visibility: 'off'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'transit',\r\n            elementType: 'geometry',\r\n            stylers: [\r\n                {\r\n                    color: '#2f3948'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'transit.station',\r\n            elementType: 'labels.text.fill',\r\n            stylers: [\r\n                {\r\n                    color: '#d59563'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'water',\r\n            elementType: 'geometry',\r\n            stylers: [\r\n                {\r\n                    color: '#17263c'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'water',\r\n            elementType: 'labels.text.fill',\r\n            stylers: [\r\n                {\r\n                    color: '#515c6d'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            featureType: 'water',\r\n            elementType: 'labels.text.stroke',\r\n            stylers: [\r\n                {\r\n                    color: '#17263c'\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        x: state.x,\r\n        y: state.y\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    { saveMapCoords }\r\n)(\r\n    GoogleApiWrapper({\r\n        apiKey: 'AIzaSyCw1Cu5QmZqsFLWq-D7m12E3Qqjjj13xWY'\r\n    })(Maps)\r\n)\r\n\r\n/*\r\nimport { Map, GoogleApiWrapper } from 'google-maps-react';\r\n\r\nimport '../styles/mapQuery.scss'\r\n\r\nconst mapStyles = {\r\n\t\t  width: '100%',\r\n\t\t  height: '100%',\r\n};\r\nexport default function MapQuery() {\r\n\treturn (\r\n\t        <Map\r\n\t          google={this.props.google}\r\n\t          zoom={8}\r\n\t          style={mapStyles}\r\n\t          initialCenter={{ lat: 47.444, lng: -122.176}}\r\n\t        />\r\n\t);\r\n}\r\n\r\nexport default GoogleApiWrapper({\r\n\t  apiKey: 'AIzaSyCSu4_BXLGx-_RprlX5-ewaMdI5gAGi8Mk'\r\n})(MapContainer);*/"]},"metadata":{},"sourceType":"module"}