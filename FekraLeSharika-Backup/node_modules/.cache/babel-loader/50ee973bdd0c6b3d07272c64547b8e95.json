{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React, { Component } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport CameraIcon from '@material-ui/icons/PhotoCamera';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Grid from '@material-ui/core/Grid';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Link from '@material-ui/core/Link';\nimport absoluteUrl from 'next-absolute-url';\nimport { useRouter } from 'next/router';\n\nfunction Copyright() {\n  return React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    align: \"center\"\n  }, 'Copyright © ', React.createElement(Link, {\n    color: \"inherit\",\n    href: \"https://material-ui.com/\"\n  }, \"Your Website\"), ' ', new Date().getFullYear(), '.');\n}\n\nvar classes = makeStyles(function (theme) {\n  return {\n    icon: {\n      marginRight: theme.spacing(2)\n    },\n    heroContent: {\n      backgroundColor: theme.palette.background.paper,\n      padding: theme.spacing(8, 0, 6)\n    },\n    heroButtons: {\n      marginTop: theme.spacing(4)\n    },\n    cardGrid: {\n      paddingTop: theme.spacing(8),\n      paddingBottom: theme.spacing(8)\n    },\n    card: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    cardMedia: {\n      paddingTop: '56.25%' // 16:9\n\n    },\n    cardContent: {\n      flexGrow: 1\n    },\n    footer: {\n      backgroundColor: theme.palette.background.paper,\n      padding: theme.spacing(6)\n    }\n  };\n});\nvar location;\n\nvar Page =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Page, _React$Component);\n\n  function Page() {\n    _classCallCheck(this, Page);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Page).apply(this, arguments));\n  }\n\n  _createClass(Page, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, null, React.createElement(CssBaseline, null), React.createElement(AppBar, {\n        position: \"relative\"\n      }, React.createElement(Toolbar, null, React.createElement(CameraIcon, {\n        className: classes.icon\n      }), React.createElement(Typography, {\n        variant: \"h6\",\n        color: \"inherit\",\n        noWrap: true\n      }, \"Album layout\"))), React.createElement(\"main\", null, React.createElement(\"br\", null), React.createElement(\"br\", null), React.createElement(Container, {\n        className: classes.cardGrid,\n        maxWidth: \"md\"\n      }, React.createElement(Grid, {\n        container: true,\n        spacing: 4\n      }, this.props.repos.map(function (card) {\n        return React.createElement(Grid, {\n          item: true,\n          key: card.name,\n          xs: 12,\n          sm: 6,\n          md: 4\n        }, React.createElement(Card, {\n          className: classes.card\n        }, React.createElement(CardMedia, {\n          style: {\n            height: 10,\n            paddingTop: '56%'\n          },\n          className: classes.cardMedia,\n          image: card.imgURL,\n          title: \"Image title\"\n        }), React.createElement(CardContent, {\n          className: classes.cardContent\n        }, React.createElement(Typography, {\n          gutterBottom: true,\n          variant: \"h5\",\n          component: \"h2\"\n        }, card.name), React.createElement(Typography, null, card.shortDescription)), React.createElement(CardActions, null, React.createElement(Button, {\n          size: \"small\",\n          color: \"primary\",\n          href: \"https://www.youtube.com/\"\n        }, \"Visit Website\"), React.createElement(Link, {\n          href: {\n            pathname: '/page',\n            query: {\n              name: 'Websites and Apps',\n              subcategory: '/Domains'\n            }\n          }\n        }, React.createElement(Button, {\n          size: \"small\",\n          color: \"primary\",\n          href: \"/ResourceView\"\n        }, \"View Resource\")))));\n      })))), React.createElement(\"br\", null), React.createElement(\"footer\", {\n        className: classes.footer\n      }, React.createElement(Typography, {\n        variant: \"h6\",\n        align: \"center\",\n        gutterBottom: true\n      }, \"Footer\"), React.createElement(Typography, {\n        variant: \"subtitle1\",\n        align: \"center\",\n        color: \"textSecondary\",\n        component: \"p\"\n      }, \"Something here to give the footer a purposes!\"), React.createElement(Copyright, null)));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var query, cards, aws_access_key_id, aws_secret_access_key, AWS, s3, index, infoJson, info, prefix, params, categoryFolder, i, limit, newBucket, imgURL;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                query = _ref.query;\n                console.log(\"here **************-->\" + query.category.toString());\n                cards = [];\n                aws_access_key_id = \"AKIAJ75XCMI5V4JBEOAA\";\n                aws_secret_access_key = \"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\";\n                AWS = require('aws-sdk');\n                AWS.config.update({\n                  region: 'us-east-2',\n                  accessKeyId: aws_access_key_id,\n                  secretAccessKey: aws_secret_access_key\n                });\n                s3 = new AWS.S3(); // ----Uncomment here for static testing-----\n                // var Paved = {\n                //     \"name\" : \"Paved\", \"description\" : \"Email marketing and sponsored content, simplified. Find newsletters with subscriber profiles that fit your needs, and advertise with them.\",\n                //     \"shortDescription\" : \"Email marketing and sponsored content, simplified. Find newsletters with subscriber profiles that…\",\n                //     \"Likes\" : \"1\",\n                //     \"imgURL\" : \"https://y2u.be/img/why_y2ube_v2.png\",\n                //     \"URL\" : \"https://www.paved.com\"\n                // }\n                // cards[0] = Paved;\n                // cards[1] = Paved;\n                // cards[2] = Paved;\n                // cards[3] = Paved;\n                // cards[4] = Paved;\n\n                index = 0;\n                prefix = query.category.toString() + query.subcategory.toString();\n                params = {\n                  Bucket: 'the-resources',\n                  Prefix: query.category.toString() + query.subcategory.toString()\n                };\n                _context.next = 13;\n                return s3.listObjectsV2(params).promise();\n\n              case 13:\n                categoryFolder = _context.sent;\n                console.log(prefix);\n                console.log(categoryFolder.Contents);\n                i = 0;\n\n              case 17:\n                if (!(i < categoryFolder.KeyCount)) {\n                  _context.next = 36;\n                  break;\n                }\n\n                limit = categoryFolder.Contents[i].Key.lastIndexOf(\"/\");\n                newBucket = categoryFolder.Contents[i].Key.substring(0, limit);\n                console.log(\"newBucket: \" + newBucket);\n                params = {\n                  Bucket: 'the-resources/' + newBucket,\n                  Key: 'info.txt'\n                };\n                _context.next = 24;\n                return s3.getObject(params).promise();\n\n              case 24:\n                info = _context.sent;\n                infoJson = JSON.parse(info.Body.toString());\n                console.log(infoJson.name + '.png');\n                imgURL = s3.getSignedUrl('getObject', {\n                  Bucket: 'the-resources/' + newBucket,\n                  Key: 'thumbnail.png',\n                  Expires: 142662\n                });\n                console.log(\"infoJson.name: \" + infoJson.name);\n                console.log(\"imgURL: \" + imgURL);\n                infoJson[\"imgURL\"] = imgURL;\n                cards[index] = infoJson;\n                index++;\n\n              case 33:\n                i += 2;\n                _context.next = 17;\n                break;\n\n              case 36:\n                console.log(cards);\n                return _context.abrupt(\"return\", {\n                  repos: cards\n                });\n\n              case 38:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Page;\n}(React.Component);\n\nexport { Page as default };","map":null,"metadata":{},"sourceType":"module"}